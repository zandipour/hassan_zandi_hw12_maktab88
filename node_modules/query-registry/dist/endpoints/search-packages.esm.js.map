{"version":3,"file":"search-packages.esm.js","sources":["../../src/endpoints/search-packages.ts"],"sourcesContent":["import { SearchCriteria } from '../types/search-criteria';\nimport { SearchResults } from '../types/search-results';\nimport { fetchFromRegistry } from '../utils/fetch-from-registry';\nimport { normalizeRawSearchCriteria } from '../utils/normalize-raw-search-criteria';\n\n/**\n * `searchPackages` returns the packages corresponding to a given query.\n *\n * @param query - one or more search criteria\n * @param registry - URL of the registry (default: npm registry)\n * @param mirrors - URLs of the registry mirrors (default: npm registry mirrors)\n * @param cached - accept cached responses (default: `true`)\n *\n * @example\n * Get the search results for text query `query-registry` from the npm registry:\n *\n * ```typescript\n * import { searchPackages } from 'query-registry';\n *\n * (async () => {\n *     const results = await searchPackages({ query: { text: 'query-registry' } });\n *\n *     // Output: 'query-registry'\n *     console.log(results.objects[0].package.name);\n * })();\n * ```\n *\n * @see {@link SearchResults}\n * @see {@link SearchCriteria}\n * @see {@link npmRegistry}\n * @see {@link npmRegistryMirrors}\n */\nexport async function searchPackages({\n    query: rawSearchCriteria,\n    registry,\n    mirrors,\n    cached,\n}: {\n    query: SearchCriteria;\n    registry?: string;\n    mirrors?: string[];\n    cached?: boolean;\n}): Promise<SearchResults> {\n    const endpoint = '/-/v1/search';\n    const query = normalizeRawSearchCriteria({ rawSearchCriteria });\n    return fetchFromRegistry({ endpoint, query, registry, mirrors, cached });\n}\n"],"names":["searchPackages","query","rawSearchCriteria","registry","mirrors","cached","endpoint","normalizeRawSearchCriteria","fetchFromRegistry"],"mappings":";;;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BG;;AACI,eAAeA,cAAf,CAA8B;AACjCC,EAAAA,KAAK,EAAEC,iBAD0B;EAEjCC,QAFiC;EAGjCC,OAHiC;AAIjCC,EAAAA,MAAAA;AAJiC,CAA9B,EAUN;EACG,MAAMC,QAAQ,GAAG,cAAjB,CAAA;EACA,MAAML,KAAK,GAAGM,0BAA0B,CAAC;AAAEL,IAAAA,iBAAAA;AAAF,GAAD,CAAxC,CAAA;AACA,EAAA,OAAOM,iBAAiB,CAAC;IAAEF,QAAF;IAAYL,KAAZ;IAAmBE,QAAnB;IAA6BC,OAA7B;AAAsCC,IAAAA,MAAAA;AAAtC,GAAD,CAAxB,CAAA;AACH;;;;"}