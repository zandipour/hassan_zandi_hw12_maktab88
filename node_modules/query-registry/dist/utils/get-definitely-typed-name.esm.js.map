{"version":3,"file":"get-definitely-typed-name.esm.js","sources":["../../src/utils/get-definitely-typed-name.ts"],"sourcesContent":["import { getRawPackageManifest } from '../endpoints/get-raw-package-manifest';\nimport { RawPackageManifest } from '../types/raw-package-manifest';\n\nexport async function getDefinitelyTypedName({\n    rawPackageManifest,\n    registry,\n    mirrors,\n    cached,\n}: {\n    rawPackageManifest: RawPackageManifest;\n    registry?: string;\n    mirrors?: string[];\n    cached?: boolean;\n}): Promise<string | undefined> {\n    const { name, types, typings } = rawPackageManifest;\n    const definitelyTypedName = toDefinitelyTypedName({ name });\n    const alreadyTyped = name === definitelyTypedName || !!types || !!typings;\n    if (alreadyTyped) {\n        return undefined;\n    }\n\n    let ok = false;\n    try {\n        const { deprecated } = await getRawPackageManifest({\n            name: definitelyTypedName,\n            registry,\n            mirrors,\n            cached,\n        });\n        ok = deprecated === undefined;\n    } catch {}\n    return ok ? definitelyTypedName : undefined;\n}\n\n/**\n * `toDefinitelyTypedName` returns the name of the corresponding\n * DefinitelyTyped package (for example,\n * `foo` => `@types/foo`,\n * `@bar/baz` => `@types/bar__baz`).\n */\nfunction toDefinitelyTypedName({ name }: { name: string }): string {\n    return name.startsWith('@types/')\n        ? name\n        : `@types/${name.replace('@', '').replace('/', '__')}`;\n}\n"],"names":["getDefinitelyTypedName","rawPackageManifest","registry","mirrors","cached","name","types","typings","definitelyTypedName","toDefinitelyTypedName","alreadyTyped","undefined","ok","deprecated","getRawPackageManifest","startsWith","replace"],"mappings":";;AAGO,eAAeA,sBAAf,CAAsC;EACzCC,kBADyC;EAEzCC,QAFyC;EAGzCC,OAHyC;AAIzCC,EAAAA,MAAAA;AAJyC,CAAtC,EAUN;EACG,MAAM;IAAEC,IAAF;IAAQC,KAAR;AAAeC,IAAAA,OAAAA;AAAf,GAAA,GAA2BN,kBAAjC,CAAA;EACA,MAAMO,mBAAmB,GAAGC,qBAAqB,CAAC;AAAEJ,IAAAA,IAAAA;AAAF,GAAD,CAAjD,CAAA;AACA,EAAA,MAAMK,YAAY,GAAGL,IAAI,KAAKG,mBAAT,IAAgC,CAAC,CAACF,KAAlC,IAA2C,CAAC,CAACC,OAAlE,CAAA;;AACA,EAAA,IAAIG,YAAJ,EAAkB;AACd,IAAA,OAAOC,SAAP,CAAA;AACH,GAAA;;EAED,IAAIC,EAAE,GAAG,KAAT,CAAA;;EACA,IAAI;IACA,MAAM;AAAEC,MAAAA,UAAAA;KAAe,GAAA,MAAMC,qBAAqB,CAAC;AAC/CT,MAAAA,IAAI,EAAEG,mBADyC;MAE/CN,QAF+C;MAG/CC,OAH+C;AAI/CC,MAAAA,MAAAA;AAJ+C,KAAD,CAAlD,CAAA;IAMAQ,EAAE,GAAGC,UAAU,KAAKF,SAApB,CAAA;GAPJ,CAQE,MAAM,EAAE;;AACV,EAAA,OAAOC,EAAE,GAAGJ,mBAAH,GAAyBG,SAAlC,CAAA;AACH,CAAA;AAED;;;;;AAKG;;AACH,SAASF,qBAAT,CAA+B;AAAEJ,EAAAA,IAAAA;AAAF,CAA/B,EAAyD;EACrD,OAAOA,IAAI,CAACU,UAAL,CAAgB,SAAhB,CACDV,GAAAA,IADC,GAES,CAAA,OAAA,EAAAA,IAAI,CAACW,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAsBA,CAAAA,OAAtB,CAA8B,GAA9B,EAAmC,IAAnC,EAFhB,CAAA,CAAA;AAGH;;;;"}